<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Flask疫情实战 | Hanson&#39;s Blog</title>
<meta name="keywords" content="数据可视化, Flask">
<meta name="description" content="Flask搭建web实现疫情数据可视化">
<meta name="author" content="
作者:&nbsp;hanson">
<link rel="canonical" href="https://hanson00.github.io/posts/technology/python/flask%E7%96%AB%E6%83%85%E5%AE%9E%E6%88%98/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.845a44c8f19c77e054f472b3a0bacb3d33effea14f20590af5e97de848f8ab8b.css" integrity="sha256-hFpEyPGcd&#43;BU9HKzoLrLPTPv/qFPIFkK9el96Ej4q4s=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hanson00.github.io/posts/imgs/66.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://hanson00.github.io/posts/imgs/favicon16x16.ico">
<link rel="icon" type="image/png" sizes="32x32" href="https://hanson00.github.io/posts/imgs/favicon32x32.ico">
<link rel="apple-touch-icon" href="https://hanson00.github.io/posts/imgs/66.jpg">
<link rel="mask-icon" href="https://hanson00.github.io/posts/imgs/66.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Flask疫情实战" />
<meta property="og:description" content="Flask搭建web实现疫情数据可视化" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hanson00.github.io/posts/technology/python/flask%E7%96%AB%E6%83%85%E5%AE%9E%E6%88%98/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-26T07:54:20&#43;08:00" />
<meta property="article:modified_time" content="2022-07-26T07:54:20&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Flask疫情实战"/>
<meta name="twitter:description" content="Flask搭建web实现疫情数据可视化"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://hanson00.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻技术类文章",
      "item": "https://hanson00.github.io/posts/technology/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Python文章",
      "item": "https://hanson00.github.io/posts/technology/python/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Flask疫情实战",
      "item": "https://hanson00.github.io/posts/technology/python/flask%E7%96%AB%E6%83%85%E5%AE%9E%E6%88%98/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Flask疫情实战",
  "name": "Flask疫情实战",
  "description": "Flask搭建web实现疫情数据可视化",
  "keywords": [
    "数据可视化", "Flask"
  ],
  "articleBody": "Python Flask的项目实战 项目概述：使用Flask将爬虫爬取到的数据结合echarts可视化的展示到页面(Python+Flask+Echarts)，使用jQuery和AJAX实现数据交互与局部刷新\n效果展示如下：\n项目目录如下：\n爬取并存储疫情数据 数据来源：腾讯疫情实时数据\n 获取疫情数据\nget_tenxun_nowdate_data()：将返回爬取到的腾讯疫情数据\nupdate_details()|insert_history()|update_history()：对数据进行数据库的存储操作\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166  # @file : spiders1.py # $software : PyCharm import re import time import pymysql import requests import time import traceback from configsql import get_conn, close_conn def get_tenxund_history_ata_and_all(): \"\"\" 第一个函数先返回历史数据 :return:history[历史数据], nowdate_data[省级数据] \"\"\" history = {} url = \"https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=chinaDayListNew,chinaDayAddListNew\u0026limit=30\" response = requests.get(url=url) data_resp = response.json() for i in data_resp[\"data\"][\"chinaDayListNew\"]: ds = \"2022.\" + i[\"date\"] tup = time.strptime(ds, \"%Y.%m.%d\") ds = time.strftime(\"%Y-%m-%d\", tup) confirm = i[\"confirm\"] suspect = i[\"suspect\"] heal = i[\"heal\"] dead = i[\"dead\"] history[ds] = {\"confirm\": confirm, \"suspect\": suspect, \"heal\": heal, \"dead\": dead} for i in data_resp[\"data\"][\"chinaDayAddListNew\"]: ds = \"2022.\" + i[\"date\"] tup = time.strptime(ds, \"%Y.%m.%d\") ds = time.strftime(\"%Y-%m-%d\", tup) confirm = i[\"confirm\"] suspect = i[\"suspect\"] heal = i[\"heal\"] dead = i[\"dead\"] history[ds].update({\"confirm_add\": confirm, \"suspect_add\": suspect, \"heal_add\": heal, \"dead_add\": dead}) nowdate_data = get_tenxun_nowdate_data() return history, nowdate_data def get_tenxun_nowdate_data(): details = [] # 当日详细数据 url = \"https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=localCityNCOVDataList,diseaseh5Shelf\" data = { \"modules\": \"localCityNCOVDataList,diseaseh5Shelf\" } response = requests.post(url=url) data_resp = response.json() update_time = data_resp[\"data\"][\"diseaseh5Shelf\"][\"lastUpdateTime\"] for i in data_resp[\"data\"][\"diseaseh5Shelf\"][\"areaTree\"][0][\"children\"]: province = i[\"name\"] # 省名 # print(province) for city_info in i[\"children\"]: # if city_info[\"name\"] == \"地区待确认\": # city_info[\"name\"] = province # print(city_info[\"name\"]) city = city_info[\"name\"] confirm = city_info[\"total\"][\"confirm\"] confirm_add = city_info[\"total\"][\"continueDayZeroLocalConfirmAdd\"] heal = city_info[\"total\"][\"heal\"] dead = city_info[\"total\"][\"dead\"] details.append([update_time, province, city, confirm, confirm_add, heal, dead]) return details def update_details(): cursor = None conn = None try: li = get_tenxund_history_ata_and_all()[1]\t# 获取上面爬取的数据 conn, cursor = get_conn()\t# 获取游标对象 sql = \"insert into details(update_time, province, city, confirm, confirm_add, heal, dead) \" \\ \"values(%s, %s, %s, %s, %s, %s, %s)\" # 下面两句是获取最新的时间，并判断是否要更新数据 sql_query = \"select %s=(select update_time from details order by id desc limit 1)\" cursor.execute(sql_query, li[0][0]) if not cursor.fetchone()[0]: print(f\"{time.asctime()}开始更新数据\") for item in li: cursor.execute(sql, item) conn.commit() print(f\"{time.asctime()}数据更新完毕\") else: print(f\"{time.asctime()}已经是最新数据了\") except: traceback.print_exc() finally: close_conn(conn, cursor) def insert_history(): cursor = None conn = None try: dic = get_tenxund_history_ata_and_all()[0] print(f\"{time.asctime()}开始插入历史数据\") conn, cursor = get_conn() sql = \"insert into history values(%s, %s, %s, %s, %s, %s, %s, %s, %s)\" for k, v in dic.items(): cursor.execute(sql, [k, v.get(\"confirm\"), v.get(\"confirm_add\"), v.get(\"suspect\"), v.get(\"suspect_add\"), v.get(\"heal\"), v.get(\"heal_add\"), v.get(\"dead\"), v.get(\"dead_add\")]) conn.commit() print(f\"{time.asctime()}插入历史数据完毕\") except: traceback.print_exc() finally: close_conn(conn, cursor) def update_history(): cursor = None conn = None try: dic = get_tenxund_history_ata_and_all()[0] print(f\"{time.asctime()}开始更新历史数据\") conn, cursor = get_conn() sql = \"insert into history values(%s, %s, %s, %s, %s, %s, %s, %s, %s)\" sql_query = \"select confirm from history where ds=%s\" for k, v in dic.items(): if not cursor.execute(sql_query, k): cursor.execute(sql, [k, v.get(\"confirm\"), v.get(\"confirm_add\"), v.get(\"suspect\"), v.get(\"suspect_add\"), v.get(\"heal\"), v.get(\"heal_add\"), v.get(\"dead\"), v.get(\"dead_add\")]) conn.commit() print(f\"{time.asctime()}插入历史数据完毕\") except: traceback.print_exc() finally: close_conn(conn, cursor) def get_baidu_hot(): url = \"https://top.baidu.com/board?tab=realtime\" response = requests.get(url=url) # print(response.text) reword = re.compile('\"word\":\"(?P.*?)\"') result = reword.finditer(response.text) # for i in result: # print(i.group(\"content\")) content = [i.group(\"content\") for i in result] # print(content) return content response.close() def update_baidu_hot(): cursor = None conn = None try: content = get_baidu_hot() print(f\"{time.asctime()}开始更新热搜数据\") conn, cursor = get_conn() sql = \"insert into hotsearch(dt, content) values(%s, %s)\" ts = time.strftime(\"%Y-%m-%d%X\") for i in content: cursor.execute(sql, (ts, i)) conn.commit() print(f\"{time.asctime()}热搜数据更新完毕\") except: traceback.print_exc() finally: close_conn(conn, cursor) if __name__ == '__main__': insert_history() update_details() update_history() update_baidu_hot()    存储疫情数据库的配置\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  # @file : configsql.py # $software : PyCharm import pymysql def get_conn(): # 打开数据库连接 db = pymysql.connect(host='localhost', user='root', password='1234', database='cov') # 创建一个游标对象 cursor cursor = db.cursor() return db, cursor def close_conn(conn, cursor): if cursor: cursor.close() if conn: conn.close()   Flask业务逻辑的编写  右上角的时间显示的代码\n 后台返回时间\n1 2 3 4 5 6 7 8  # @file : utils.py # $software : PyCharm import time import pymysql def gettime(): time_str = time.strftime(\"%Y{}%m{}%d{}%X\") return time_str.format(\"年\",\"月\",\"日\")   controller.js\n1 2 3 4 5 6 7 8 9 10 11  function gettime() { $.ajax({ url: \"/time\", timeout: 10000, success: function (data) { $(\"#time\").html(data) }, error: function (xhr, type, errorThrown) { } }) }   main.html\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37   html lang=\"en\" head meta charset=\"UTF-8\" title疫情监控title script src=\"https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"script link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/main.css') }}\" script src=\"{{ url_for('static', filename='js/echarts.min.js') }}\"script script src=\"{{ url_for('static', filename='js/china.js') }}\"script head body div id=\"title\"全国疫情实时跟踪div div id=\"time\"div div id=\"l1\"div div id=\"l2\"div div id=\"c1\" div class=\"num\"h1--------h1div div class=\"num\"h1--------h1div div class=\"num\"h1--------h1div div class=\"num\"h1--------h1div div class=\"txt\"h2累计确诊h2div div class=\"txt\"h2剩余疑似h2div div class=\"txt\"h2累计治愈h2div div class=\"txt\"h2累计死亡h2div div div id=\"c2\"div div id=\"r1\"div div id=\"r2\"h3在家办公，减少出门次数，勤洗手多通风，尽自己的最大努力为这场战疫献出自己的一份力。中国加油!h3br h3拼尽全力抗击疫情，医护人员是最美逆行者!为自己加油，让我们一起并肩作战，让疫情早日消散!h3div script src=\"{{ url_for('static', filename='js/ec_center.js') }}\"script script src=\"{{ url_for('static', filename='js/controller.js') }}\"script script src=\"{{ url_for('static', filename='js/ec_left1.js') }}\"script script src=\"{{ url_for('static', filename='js/ec_left2.js') }}\"script script src=\"{{ url_for('static', filename='js/ec_right1.js') }}\"script body html   controller.js完整代码\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90  function gettime() { $.ajax({ url: \"/time\", timeout: 10000, success: function (data) { $(\"#time\").html(data) }, error: function (xhr, type, errorThrown) { } }) } function getc1data() { $.ajax({ url: \"/c1\", success: function (data) { $(\".num h1\").eq(0).text(data.confirm); $(\".num h1\").eq(1).text(data.suspect); $(\".num h1\").eq(2).text(data.heal); $(\".num h1\").eq(3).text(data.dead); }, error: function (xhr, type, errorThrown) { } }) } function getc2data() { $.ajax({ url: \"/c2\", success: function (data) { optionMap.series[0].data = data.data ec_center.setOption(optionMap) }, error: function (xhr, type, errorThrown) { } }) } function getl1data() { $.ajax({ url: \"/l1\", success: function (data) { ec_left1_Option.xAxis[0].data = data.day ec_left1_Option.series[0].data = data.confirm ec_left1_Option.series[1].data = data.suspect ec_left1_Option.series[2].data = data.heal ec_left1_Option.series[3].data = data.dead ec_left1.setOption(ec_left1_Option) }, error: function (xhr, type, errorThrown) { } }) } function getl2data() { $.ajax({ url: \"/l2\", success: function (data) { ec_left2_Option.xAxis[0].data = data.day ec_left2_Option.series[0].data = data.confirm_add ec_left2_Option.series[1].data = data.suspect_add ec_left2.setOption(ec_left2_Option) }, error: function (xhr, type, errorThrown) { } }) } function get_r1_data(){ $.ajax({ url:\"/r1\", success: function(data) { ec_right1_Option.xAxis.data=data.city; ec_right1_Option.series[0].data=data.confirm; ec_right1.setOption(ec_right1_Option); } }) } getc1data() getl1data() getl2data() getc2data() get_r1_data() setInterval(gettime, 1000) setInterval(getc1data, 1000*10) setInterval(getc2data, 10000*10) setInterval(getl1data, 10000*10) setInterval(getl2data, 10000*10) setInterval(get_r1_data, 10000*10)   Echarts语法简明  初始化echarts实例  1 2  //初始化echarts实例 var ec_center = echarts.init(document.getElementById(\"c2\"),\"dark\");    找到你想要的数据可视化模板代码，或者自己编写\n  使用制定的配置项和数据显示图表\n1 2  //使用制定的配置项和数据显示图表 ec_center.setOption(optionMap);     例如：\nec_center.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77  //初始化echarts实例 var ec_center = echarts.init(document.getElementById(\"c2\"),\"dark\"); var mydata = [] var optionMap = { title: { text: '', subtext: '', x: 'left' }, tooltip: { trigger: 'item' }, //左侧小导航图标  visualMap: { show: true, x: 'left', y: 'bottom', textStyle: { fontSize: 8 }, splitList: [{ start: 1, end: 9 }, { start: 10, end: 99 }, { start: 100, end: 999 }, { start: 1000, end: 9999 }, { start: 10000 } ], color: ['#8A3310','#C64918', '#E55B25','#F2AD92', '#F9DCD1'] }, //配置属性  series: [{ name: '累积确诊人数', type: 'map', mapType: 'china', roam: false, itemStyle: { normal: { borderWidth: .5, borderColor: '#009fe8', areaColor: '#ffefd5' }, emphasis: { borderWidth: .5, borderColor: '#4b0082', areaColor: '#fff' } }, label: { normal: { show: true, //省份名称  fontSize: 8 }, emphasis: { show: true, fontSize: 8 } }, data: mydata //数据  }] }; //使用制定的配置项和数据显示图表  ec_center.setOption(optionMap);   ec_left1.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86  var ec_left1 = echarts.init(document.getElementById('l1'), \"dark\"); var ec_left1_Option = { title: { text: \"全国累计趋势\", textStyle: { //color:'white',  }, left: 'left', }, tooltip: { trigger: 'axis', axisPointer: { type: 'line', lineStyle: { color: '#7171C6' } }, }, legend: { data: [\"累计确诊\", \"现有疑似\", \"累积治愈\", \"累计死亡\"], left: \"right\" }, //图形位置  grid: { left: '4%', right: '6%', bottom: '4%', top: 50, containLabel: true }, xAxis: [{ type: 'category', data: [] // '01.24', '01.25', '01.26'  }], yAxis: [{ type: 'value', axisLabel: { show: true, color: 'white', fontSize: 12, formatter: function(value) { if (value = 1000) { value = value / 1000 + 'k'; } return value; } }, //y轴线设置显示  axisLine: { show: true }, //与x轴平行的线样式  splitLine: { show: true, lineStyle: { color: '#17273B', width: 1, type: 'solid', } } }], series: [{ name: \"累计确诊\", type: 'line', smooth: true, data: [] // 260, 406, 529  }, { name: \"现有疑似\", type: 'line', smooth: true, data: []}, { name: \"累积治愈\", type: 'line', smooth: true, data: [] },{ name: \"累计死亡\", type: 'line', smooth: true, data: [] }] }; ec_left1.setOption(ec_left1_Option)   ec_left2.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82  var ec_left2 = echarts.init(document.getElementById('l2'), \"dark\"); var ec_left2_Option = { tooltip: { trigger: 'axis', //指示器  axisPointer: { type: 'line', lineStyle: { color: '#7171C6' } }, }, legend: { data: ['新增确诊', '新增疑似'], left: \"right\" }, //标题样式  title: { text: \"全国新增趋势\", textStyle: { color:'yellow', fontSize: 16 }, left: 'left' }, //图形位置  grid: { left: '4%', right: '6%', bottom: '4%', top: 50, containLabel: true }, xAxis: [{ type: 'category', //x轴坐标点开始与结束点位置都不在最边缘  // boundaryGap : true,  data: [] }], yAxis: [{ type: 'value', //y轴字体设置  //y轴线设置显示  axisLine: { show: true }, axisLabel: { show: true, color: 'white', fontSize: 12, formatter: function(value) { if (value = 1000) { value = value / 1000 + 'k'; } return value; } }, //与x轴平行的线样式  splitLine: { show: true, lineStyle: { color: '#17273B', width: 1, type: 'solid', } } }], series: [{ name: \"新增确诊\", type: 'line', smooth: true, data: [] }, { name: \"新增疑似\", type: 'line', smooth: true, data: [] }] }; ec_left2.setOption(ec_left2_Option)   ec_right1.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  var ec_right1=echarts.init(document.getElementById('r1'),\"dark\"); var ec_right1_Option={ title:{ text:\"非湖北地区城市确诊TOP5\", textStyle:{ color:'white', }, left:'left', }, color:['#3398DB'], tooltip:{ trigger:'axis', axisPointer:{ type:'shadow', } }, xAxis:{ type:'category', data:[] }, yAxis:{ type:'value', }, series:[{ data:[], type:'bar', barMaxWidth:\"50%\" }] }; ec_right1.setOption(ec_right1_Option)   ",
  "wordCount" : "3709",
  "inLanguage": "en",
  "datePublished": "2022-07-26T07:54:20+08:00",
  "dateModified": "2022-07-26T07:54:20+08:00",
  "author":[{
    "@type": "Person",
    "name": "hanson"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hanson00.github.io/posts/technology/python/flask%E7%96%AB%E6%83%85%E5%AE%9E%E6%88%98/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Hanson's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hanson00.github.io/posts/imgs/66.jpg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hanson00.github.io/" accesskey="h" title="Hanson&#39;s Blog (Alt + H)">Hanson&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hanson00.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://hanson00.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://hanson00.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://hanson00.github.io/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://hanson00.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://hanson00.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">

  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hanson00.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://hanson00.github.io/posts/">Posts</a>&nbsp;»&nbsp;<a href="https://hanson00.github.io/posts/technology/">💻技术类文章</a>&nbsp;»&nbsp;<a href="https://hanson00.github.io/posts/technology/python/">Python文章</a></div>
    <h1 class="post-title">
      Flask疫情实战
    </h1>
    <div class="post-description">
      Flask搭建web实现疫情数据可视化
    </div>
    <div class="post-meta">










更新:&nbsp;2022-07-26&nbsp;|&nbsp;字数:&nbsp;3709字&nbsp;|&nbsp;时长: 8分钟&nbsp;|&nbsp;
作者:&nbsp;hanson&nbsp;|&nbsp;标签: &nbsp;
      <ul class="post-tags-meta">
        <a href="https://hanson00.github.io/tags/flask/">Flask</a>
      </ul>

      <span id="busuanzi_container_page_pv">
        &nbsp;| 访问: <span id="busuanzi_value_page_pv"></span>
      </span>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
        <div class="toc">
            <details  open>
                <summary accesskey="c" title="(Alt + C)">
                    <span class="details">Table of Contents</span>
                </summary>

                <div class="inner"><ul>
                        <li>
                            <a href="#python-flask%e7%9a%84%e9%a1%b9%e7%9b%ae%e5%ae%9e%e6%88%98" aria-label="Python Flask的项目实战">Python Flask的项目实战</a><ul>
                                    
                        <li>
                            <a href="#%e7%88%ac%e5%8f%96%e5%b9%b6%e5%ad%98%e5%82%a8%e7%96%ab%e6%83%85%e6%95%b0%e6%8d%ae" aria-label="爬取并存储疫情数据">爬取并存储疫情数据</a></li>
                        <li>
                            <a href="#flask%e4%b8%9a%e5%8a%a1%e9%80%bb%e8%be%91%e7%9a%84%e7%bc%96%e5%86%99" aria-label="Flask业务逻辑的编写">Flask业务逻辑的编写</a></li>
                        <li>
                            <a href="#echarts%e8%af%ad%e6%b3%95%e7%ae%80%e6%98%8e" aria-label="Echarts语法简明">Echarts语法简明</a>
                        </li>
                    </ul>
                    </li>
                    </ul>
                </div>
            </details>
        </div>
    </aside>
    <script>
        let activeElement;
        let elements;
        window.addEventListener('DOMContentLoaded', function (event) {
            checkTocPosition();

            elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
            
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }, false);

        window.addEventListener('resize', function (event) {
            checkTocPosition();
        }, false);

        window.addEventListener('scroll', () => {
            
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement) {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }, false);

        const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
        const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
        const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

        function checkTocPosition() {
            const width = document.body.scrollWidth;

            if (width - main - (toc * 2) - (gap * 4) > 0) {
                document.getElementById("toc-container").classList.add("wide");
            } else {
                document.getElementById("toc-container").classList.remove("wide");
            }
        }

        function getOffsetTop(element) {
            if (!element.getClientRects().length) {
                return 0;
            }
            let rect = element.getBoundingClientRect();
            let win = element.ownerDocument.defaultView;
            return rect.top + win.pageYOffset;
        }
    </script>
  <div class="post-content"><h1 id="python-flask的项目实战">Python Flask的项目实战<a hidden class="anchor" aria-hidden="true" href="#python-flask的项目实战">#</a></h1>
<p>项目概述：使用Flask将爬虫爬取到的数据结合echarts可视化的展示到页面(Python+Flask+Echarts)，使用jQuery和AJAX实现数据交互与局部刷新</p>
<p>效果展示如下：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hanson00/img@master/%E7%96%AB%E6%83%85%E5%AE%9E%E6%88%98%E5%9B%BE.png" alt="image-20220726080041084"  />
</p>
<p>项目目录如下：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hanson00/img@master/flask_list.png" alt="image-20220726101223404"  />
</p>
<h2 id="爬取并存储疫情数据">爬取并存储疫情数据<a hidden class="anchor" aria-hidden="true" href="#爬取并存储疫情数据">#</a></h2>
<p>数据来源：腾讯疫情实时数据</p>
<blockquote>
<p>获取疫情数据</p>
<p>get_tenxun_nowdate_data()：将返回爬取到的腾讯疫情数据</p>
<p>update_details()|insert_history()|update_history()：对数据进行数据库的存储操作</p>
</blockquote>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#0080ff;font-style:italic"># @file : spiders1.py</span>
<span style="color:#0080ff;font-style:italic"># $software : PyCharm</span>
<span style="color:#2c5dcd;font-weight:bold">import</span> re
<span style="color:#2c5dcd;font-weight:bold">import</span> time
<span style="color:#2c5dcd;font-weight:bold">import</span> pymysql
<span style="color:#2c5dcd;font-weight:bold">import</span> requests
<span style="color:#2c5dcd;font-weight:bold">import</span> time
<span style="color:#2c5dcd;font-weight:bold">import</span> traceback
<span style="color:#2c5dcd;font-weight:bold">from</span> configsql <span style="color:#2c5dcd;font-weight:bold">import</span> get_conn, close_conn

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">get_tenxund_history_ata_and_all</span>():
    <span style="color:#0c6">&#34;&#34;&#34;
</span><span style="color:#0c6">    第一个函数先返回历史数据
</span><span style="color:#0c6">    :return:history[历史数据], nowdate_data[省级数据]
</span><span style="color:#0c6">    &#34;&#34;&#34;</span>
    history <span style="color:#2c5dcd">=</span> {}
    url <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=chinaDayListNew,chinaDayAddListNew&amp;limit=30&#34;</span>
    response <span style="color:#2c5dcd">=</span> requests<span style="color:#2c5dcd">.</span>get(url<span style="color:#2c5dcd">=</span>url)
    data_resp <span style="color:#2c5dcd">=</span> response<span style="color:#2c5dcd">.</span>json()
    <span style="color:#2c5dcd;font-weight:bold">for</span> i <span style="color:#2c5dcd;font-weight:bold">in</span> data_resp[<span style="color:#0c6">&#34;data&#34;</span>][<span style="color:#0c6">&#34;chinaDayListNew&#34;</span>]:
        ds <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;2022.&#34;</span> <span style="color:#2c5dcd">+</span> i[<span style="color:#0c6">&#34;date&#34;</span>]
        tup <span style="color:#2c5dcd">=</span> time<span style="color:#2c5dcd">.</span>strptime(ds, <span style="color:#0c6">&#34;%Y.%m.</span><span style="color:#0c6">%d</span><span style="color:#0c6">&#34;</span>)
        ds <span style="color:#2c5dcd">=</span> time<span style="color:#2c5dcd">.</span>strftime(<span style="color:#0c6">&#34;%Y-%m-</span><span style="color:#0c6">%d</span><span style="color:#0c6">&#34;</span>, tup)
        confirm <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;confirm&#34;</span>]
        suspect <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;suspect&#34;</span>]
        heal <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;heal&#34;</span>]
        dead <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;dead&#34;</span>]
        history[ds] <span style="color:#2c5dcd">=</span> {<span style="color:#0c6">&#34;confirm&#34;</span>: confirm, <span style="color:#0c6">&#34;suspect&#34;</span>: suspect, <span style="color:#0c6">&#34;heal&#34;</span>: heal, <span style="color:#0c6">&#34;dead&#34;</span>: dead}

    <span style="color:#2c5dcd;font-weight:bold">for</span> i <span style="color:#2c5dcd;font-weight:bold">in</span> data_resp[<span style="color:#0c6">&#34;data&#34;</span>][<span style="color:#0c6">&#34;chinaDayAddListNew&#34;</span>]:
        ds <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;2022.&#34;</span> <span style="color:#2c5dcd">+</span> i[<span style="color:#0c6">&#34;date&#34;</span>]
        tup <span style="color:#2c5dcd">=</span> time<span style="color:#2c5dcd">.</span>strptime(ds, <span style="color:#0c6">&#34;%Y.%m.</span><span style="color:#0c6">%d</span><span style="color:#0c6">&#34;</span>)
        ds <span style="color:#2c5dcd">=</span> time<span style="color:#2c5dcd">.</span>strftime(<span style="color:#0c6">&#34;%Y-%m-</span><span style="color:#0c6">%d</span><span style="color:#0c6">&#34;</span>, tup)
        confirm <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;confirm&#34;</span>]
        suspect <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;suspect&#34;</span>]
        heal <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;heal&#34;</span>]
        dead <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;dead&#34;</span>]
        history[ds]<span style="color:#2c5dcd">.</span>update({<span style="color:#0c6">&#34;confirm_add&#34;</span>: confirm, <span style="color:#0c6">&#34;suspect_add&#34;</span>: suspect, <span style="color:#0c6">&#34;heal_add&#34;</span>: heal, <span style="color:#0c6">&#34;dead_add&#34;</span>: dead})
    nowdate_data <span style="color:#2c5dcd">=</span> get_tenxun_nowdate_data()
    <span style="color:#2c5dcd;font-weight:bold">return</span> history, nowdate_data

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">get_tenxun_nowdate_data</span>():
    details <span style="color:#2c5dcd">=</span> []  <span style="color:#0080ff;font-style:italic"># 当日详细数据</span>
    url <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=localCityNCOVDataList,diseaseh5Shelf&#34;</span>
    data <span style="color:#2c5dcd">=</span> {
        <span style="color:#0c6">&#34;modules&#34;</span>: <span style="color:#0c6">&#34;localCityNCOVDataList,diseaseh5Shelf&#34;</span>
    }

    response <span style="color:#2c5dcd">=</span> requests<span style="color:#2c5dcd">.</span>post(url<span style="color:#2c5dcd">=</span>url)
    data_resp <span style="color:#2c5dcd">=</span> response<span style="color:#2c5dcd">.</span>json()
    update_time <span style="color:#2c5dcd">=</span> data_resp[<span style="color:#0c6">&#34;data&#34;</span>][<span style="color:#0c6">&#34;diseaseh5Shelf&#34;</span>][<span style="color:#0c6">&#34;lastUpdateTime&#34;</span>]
    <span style="color:#2c5dcd;font-weight:bold">for</span> i <span style="color:#2c5dcd;font-weight:bold">in</span> data_resp[<span style="color:#0c6">&#34;data&#34;</span>][<span style="color:#0c6">&#34;diseaseh5Shelf&#34;</span>][<span style="color:#0c6">&#34;areaTree&#34;</span>][<span style="color:#5918bb;font-weight:bold">0</span>][<span style="color:#0c6">&#34;children&#34;</span>]:
        province <span style="color:#2c5dcd">=</span> i[<span style="color:#0c6">&#34;name&#34;</span>]  <span style="color:#0080ff;font-style:italic"># 省名</span>
        <span style="color:#0080ff;font-style:italic"># print(province)</span>
        <span style="color:#2c5dcd;font-weight:bold">for</span> city_info <span style="color:#2c5dcd;font-weight:bold">in</span> i[<span style="color:#0c6">&#34;children&#34;</span>]:
            <span style="color:#0080ff;font-style:italic"># if city_info[&#34;name&#34;] == &#34;地区待确认&#34;:</span>
            <span style="color:#0080ff;font-style:italic">#     city_info[&#34;name&#34;] = province</span>
            <span style="color:#0080ff;font-style:italic"># print(city_info[&#34;name&#34;])</span>
            city <span style="color:#2c5dcd">=</span> city_info[<span style="color:#0c6">&#34;name&#34;</span>]
            confirm <span style="color:#2c5dcd">=</span> city_info[<span style="color:#0c6">&#34;total&#34;</span>][<span style="color:#0c6">&#34;confirm&#34;</span>]
            confirm_add <span style="color:#2c5dcd">=</span> city_info[<span style="color:#0c6">&#34;total&#34;</span>][<span style="color:#0c6">&#34;continueDayZeroLocalConfirmAdd&#34;</span>]
            heal <span style="color:#2c5dcd">=</span> city_info[<span style="color:#0c6">&#34;total&#34;</span>][<span style="color:#0c6">&#34;heal&#34;</span>]
            dead <span style="color:#2c5dcd">=</span> city_info[<span style="color:#0c6">&#34;total&#34;</span>][<span style="color:#0c6">&#34;dead&#34;</span>]
            details<span style="color:#2c5dcd">.</span>append([update_time, province, city, confirm, confirm_add, heal, dead])
    <span style="color:#2c5dcd;font-weight:bold">return</span> details

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">update_details</span>():
    cursor <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    conn <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    <span style="color:#2c5dcd;font-weight:bold">try</span>:
        li <span style="color:#2c5dcd">=</span> get_tenxund_history_ata_and_all()[<span style="color:#5918bb;font-weight:bold">1</span>]	<span style="color:#0080ff;font-style:italic"># 获取上面爬取的数据</span>
        conn, cursor <span style="color:#2c5dcd">=</span> get_conn()	<span style="color:#0080ff;font-style:italic"># 获取游标对象</span>
        sql <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;insert into details(update_time, province, city, confirm, confirm_add, heal, dead) &#34;</span> \
              <span style="color:#0c6">&#34;values(</span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">)&#34;</span>
        <span style="color:#0080ff;font-style:italic"># 下面两句是获取最新的时间，并判断是否要更新数据</span>
        sql_query <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;select </span><span style="color:#0c6">%s</span><span style="color:#0c6">=(select update_time from details order by id desc limit 1)&#34;</span>
        cursor<span style="color:#2c5dcd">.</span>execute(sql_query, li[<span style="color:#5918bb;font-weight:bold">0</span>][<span style="color:#5918bb;font-weight:bold">0</span>])
        <span style="color:#2c5dcd;font-weight:bold">if</span> <span style="color:#2c5dcd;font-weight:bold">not</span> cursor<span style="color:#2c5dcd">.</span>fetchone()[<span style="color:#5918bb;font-weight:bold">0</span>]:
            <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">开始更新数据&#34;</span>)
            <span style="color:#2c5dcd;font-weight:bold">for</span> item <span style="color:#2c5dcd;font-weight:bold">in</span> li:
                cursor<span style="color:#2c5dcd">.</span>execute(sql, item)
            conn<span style="color:#2c5dcd">.</span>commit()
            <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">数据更新完毕&#34;</span>)
        <span style="color:#2c5dcd;font-weight:bold">else</span>:
            <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">已经是最新数据了&#34;</span>)
    <span style="color:#2c5dcd;font-weight:bold">except</span>:
        traceback<span style="color:#2c5dcd">.</span>print_exc()
    <span style="color:#2c5dcd;font-weight:bold">finally</span>:
        close_conn(conn, cursor)

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">insert_history</span>():
    cursor <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    conn <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    <span style="color:#2c5dcd;font-weight:bold">try</span>:
        dic <span style="color:#2c5dcd">=</span> get_tenxund_history_ata_and_all()[<span style="color:#5918bb;font-weight:bold">0</span>]
        <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">开始插入历史数据&#34;</span>)
        conn, cursor <span style="color:#2c5dcd">=</span> get_conn()
        sql <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;insert into history values(</span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">)&#34;</span>
        <span style="color:#2c5dcd;font-weight:bold">for</span> k, v <span style="color:#2c5dcd;font-weight:bold">in</span> dic<span style="color:#2c5dcd">.</span>items():
            cursor<span style="color:#2c5dcd">.</span>execute(sql, [k, v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;confirm&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;confirm_add&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;suspect&#34;</span>),
                                 v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;suspect_add&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;heal&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;heal_add&#34;</span>),
                                 v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;dead&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;dead_add&#34;</span>)])
        conn<span style="color:#2c5dcd">.</span>commit()
        <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">插入历史数据完毕&#34;</span>)
    <span style="color:#2c5dcd;font-weight:bold">except</span>:
        traceback<span style="color:#2c5dcd">.</span>print_exc()
    <span style="color:#2c5dcd;font-weight:bold">finally</span>:
        close_conn(conn, cursor)

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">update_history</span>():
    cursor <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    conn <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    <span style="color:#2c5dcd;font-weight:bold">try</span>:
        dic <span style="color:#2c5dcd">=</span> get_tenxund_history_ata_and_all()[<span style="color:#5918bb;font-weight:bold">0</span>]
        <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">开始更新历史数据&#34;</span>)
        conn, cursor <span style="color:#2c5dcd">=</span> get_conn()
        sql <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;insert into history values(</span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">)&#34;</span>
        sql_query <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;select confirm from history where ds=</span><span style="color:#0c6">%s</span><span style="color:#0c6">&#34;</span>
        <span style="color:#2c5dcd;font-weight:bold">for</span> k, v <span style="color:#2c5dcd;font-weight:bold">in</span> dic<span style="color:#2c5dcd">.</span>items():
            <span style="color:#2c5dcd;font-weight:bold">if</span> <span style="color:#2c5dcd;font-weight:bold">not</span> cursor<span style="color:#2c5dcd">.</span>execute(sql_query, k):
                cursor<span style="color:#2c5dcd">.</span>execute(sql, [k, v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;confirm&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;confirm_add&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;suspect&#34;</span>),
                                 v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;suspect_add&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;heal&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;heal_add&#34;</span>),
                                 v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;dead&#34;</span>), v<span style="color:#2c5dcd">.</span>get(<span style="color:#0c6">&#34;dead_add&#34;</span>)])
        conn<span style="color:#2c5dcd">.</span>commit()
        <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">插入历史数据完毕&#34;</span>)
    <span style="color:#2c5dcd;font-weight:bold">except</span>:
        traceback<span style="color:#2c5dcd">.</span>print_exc()
    <span style="color:#2c5dcd;font-weight:bold">finally</span>:
        close_conn(conn, cursor)

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">get_baidu_hot</span>():
    url <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;https://top.baidu.com/board?tab=realtime&#34;</span>
    response <span style="color:#2c5dcd">=</span> requests<span style="color:#2c5dcd">.</span>get(url<span style="color:#2c5dcd">=</span>url)
    <span style="color:#0080ff;font-style:italic"># print(response.text)</span>
    reword <span style="color:#2c5dcd">=</span> re<span style="color:#2c5dcd">.</span>compile(<span style="color:#0c6">&#39;&#34;word&#34;:&#34;(?P&lt;content&gt;.*?)&#34;&#39;</span>)
    result <span style="color:#2c5dcd">=</span> reword<span style="color:#2c5dcd">.</span>finditer(response<span style="color:#2c5dcd">.</span>text)
    <span style="color:#0080ff;font-style:italic"># for i in result:</span>
    <span style="color:#0080ff;font-style:italic">#     print(i.group(&#34;content&#34;))</span>
    content <span style="color:#2c5dcd">=</span> [i<span style="color:#2c5dcd">.</span>group(<span style="color:#0c6">&#34;content&#34;</span>) <span style="color:#2c5dcd;font-weight:bold">for</span> i <span style="color:#2c5dcd;font-weight:bold">in</span> result]
    <span style="color:#0080ff;font-style:italic"># print(content)</span>
    <span style="color:#2c5dcd;font-weight:bold">return</span> content
    response<span style="color:#2c5dcd">.</span>close()

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">update_baidu_hot</span>():
    cursor <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    conn <span style="color:#2c5dcd">=</span> <span style="color:#2c5dcd;font-weight:bold">None</span>
    <span style="color:#2c5dcd;font-weight:bold">try</span>:
        content <span style="color:#2c5dcd">=</span> get_baidu_hot()
        <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">开始更新热搜数据&#34;</span>)
        conn, cursor <span style="color:#2c5dcd">=</span> get_conn()
        sql <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#34;insert into hotsearch(dt, content) values(</span><span style="color:#0c6">%s</span><span style="color:#0c6">, </span><span style="color:#0c6">%s</span><span style="color:#0c6">)&#34;</span>
        ts <span style="color:#2c5dcd">=</span> time<span style="color:#2c5dcd">.</span>strftime(<span style="color:#0c6">&#34;%Y-%m-</span><span style="color:#0c6">%d</span><span style="color:#0c6"> </span><span style="color:#0c6">%X</span><span style="color:#0c6">&#34;</span>)
        <span style="color:#2c5dcd;font-weight:bold">for</span> i <span style="color:#2c5dcd;font-weight:bold">in</span> content:
            cursor<span style="color:#2c5dcd">.</span>execute(sql, (ts, i))
        conn<span style="color:#2c5dcd">.</span>commit()
        <span style="color:#5918bb;font-weight:bold">print</span>(<span style="color:#0c6">f</span><span style="color:#0c6">&#34;</span><span style="color:#0c6">{</span>time<span style="color:#2c5dcd">.</span>asctime()<span style="color:#0c6">}</span><span style="color:#0c6">热搜数据更新完毕&#34;</span>)
    <span style="color:#2c5dcd;font-weight:bold">except</span>:
        traceback<span style="color:#2c5dcd">.</span>print_exc()
    <span style="color:#2c5dcd;font-weight:bold">finally</span>:
        close_conn(conn, cursor)

<span style="color:#2c5dcd;font-weight:bold">if</span> __name__ <span style="color:#2c5dcd">==</span> <span style="color:#0c6">&#39;__main__&#39;</span>:
    insert_history()
    update_details()
    update_history()
    update_baidu_hot()
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>存储疫情数据库的配置</p>
</blockquote>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#0080ff;font-style:italic"># @file : configsql.py</span>
<span style="color:#0080ff;font-style:italic"># $software : PyCharm</span>
<span style="color:#2c5dcd;font-weight:bold">import</span> pymysql
<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">get_conn</span>():
    <span style="color:#0080ff;font-style:italic"># 打开数据库连接</span>
    db <span style="color:#2c5dcd">=</span> pymysql<span style="color:#2c5dcd">.</span>connect(host<span style="color:#2c5dcd">=</span><span style="color:#0c6">&#39;localhost&#39;</span>,
                         user<span style="color:#2c5dcd">=</span><span style="color:#0c6">&#39;root&#39;</span>,
                         password<span style="color:#2c5dcd">=</span><span style="color:#0c6">&#39;1234&#39;</span>,
                         database<span style="color:#2c5dcd">=</span><span style="color:#0c6">&#39;cov&#39;</span>)
    <span style="color:#0080ff;font-style:italic"># 创建一个游标对象 cursor</span>
    cursor <span style="color:#2c5dcd">=</span> db<span style="color:#2c5dcd">.</span>cursor()
    <span style="color:#2c5dcd;font-weight:bold">return</span> db, cursor

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">close_conn</span>(conn, cursor):
    <span style="color:#2c5dcd;font-weight:bold">if</span> cursor:
        cursor<span style="color:#2c5dcd">.</span>close()
    <span style="color:#2c5dcd;font-weight:bold">if</span> conn:
        conn<span style="color:#2c5dcd">.</span>close()
</code></pre></td></tr></table>
</div>
</div><h2 id="flask业务逻辑的编写">Flask业务逻辑的编写<a hidden class="anchor" aria-hidden="true" href="#flask业务逻辑的编写">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hanson00/img@master/ajax.png" alt="image-20220726095104750"  />
</p>
<blockquote>
<p>右上角的时间显示的代码</p>
</blockquote>
<p>后台返回时间</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#0080ff;font-style:italic"># @file : utils.py</span>
<span style="color:#0080ff;font-style:italic"># $software : PyCharm</span>
<span style="color:#2c5dcd;font-weight:bold">import</span> time
<span style="color:#2c5dcd;font-weight:bold">import</span> pymysql

<span style="color:#2c5dcd;font-weight:bold">def</span> <span style="color:#ff8000;font-weight:bold">gettime</span>():
    time_str <span style="color:#2c5dcd">=</span> time<span style="color:#2c5dcd">.</span>strftime(<span style="color:#0c6">&#34;%Y</span><span style="color:#0c6">{}</span><span style="color:#0c6"> %m</span><span style="color:#0c6">{}</span><span style="color:#0c6"> </span><span style="color:#0c6">%d{}</span><span style="color:#0c6"> </span><span style="color:#0c6">%X</span><span style="color:#0c6">&#34;</span>)
    <span style="color:#2c5dcd;font-weight:bold">return</span> time_str<span style="color:#2c5dcd">.</span>format(<span style="color:#0c6">&#34;年&#34;</span>,<span style="color:#0c6">&#34;月&#34;</span>,<span style="color:#0c6">&#34;日&#34;</span>)
</code></pre></td></tr></table>
</div>
</div><p>controller.js</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#2c5dcd;font-weight:bold">function</span> gettime() {
    $.ajax({
        url<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;/time&#34;</span>,
        timeout<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">10000</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (data) {
            $(<span style="color:#0c6">&#34;#time&#34;</span>).html(data)
        }, error<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (xhr, type, errorThrown) {

        }
    })
}
</code></pre></td></tr></table>
</div>
</div><p>main.html</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#0080ff">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#2c5dcd;font-weight:bold">html</span> <span style="color:#2c5dcd;font-style:italic">lang</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;en&#34;</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">head</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">meta</span> <span style="color:#2c5dcd;font-style:italic">charset</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">title</span>&gt;疫情监控&lt;/<span style="color:#2c5dcd;font-weight:bold">title</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">link</span> <span style="color:#2c5dcd;font-style:italic">rel</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;stylesheet&#34;</span> <span style="color:#2c5dcd;font-style:italic">href</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;css/main.css&#39;) }}&#34;</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/echarts.min.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/china.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;

&lt;/<span style="color:#2c5dcd;font-weight:bold">head</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">body</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;title&#34;</span>&gt;全国疫情实时跟踪&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;time&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;l1&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;l2&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;c1&#34;</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;num&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;--------&lt;/<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;num&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;--------&lt;/<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;num&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;--------&lt;/<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;num&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;--------&lt;/<span style="color:#2c5dcd;font-weight:bold">h1</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;txt&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;累计确诊&lt;/<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;txt&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;剩余疑似&lt;/<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;txt&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;累计治愈&lt;/<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">class</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;txt&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;累计死亡&lt;/<span style="color:#2c5dcd;font-weight:bold">h2</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;c2&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;r1&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">div</span> <span style="color:#2c5dcd;font-style:italic">id</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;r2&#34;</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">h3</span>&gt;在家办公，减少出门次数，勤洗手多通风，尽自己的最大努力为这场战疫献出自己的一份力。中国加油!&lt;/<span style="color:#2c5dcd;font-weight:bold">h3</span>&gt;&lt;<span style="color:#2c5dcd;font-weight:bold">br</span>&gt;
            &lt;<span style="color:#2c5dcd;font-weight:bold">h3</span>&gt;拼尽全力抗击疫情，医护人员是最美逆行者!为自己加油，让我们一起并肩作战，让疫情早日消散!&lt;/<span style="color:#2c5dcd;font-weight:bold">h3</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">div</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/ec_center.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/controller.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/ec_left1.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/ec_left2.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
&lt;<span style="color:#2c5dcd;font-weight:bold">script</span> <span style="color:#2c5dcd;font-style:italic">src</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;{{ url_for(&#39;static&#39;, filename=&#39;js/ec_right1.js&#39;) }}&#34;</span>&gt;&lt;/<span style="color:#2c5dcd;font-weight:bold">script</span>&gt;
&lt;/<span style="color:#2c5dcd;font-weight:bold">body</span>&gt;
&lt;/<span style="color:#2c5dcd;font-weight:bold">html</span>&gt;
</code></pre></td></tr></table>
</div>
</div><p>controller.js完整代码</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#2c5dcd;font-weight:bold">function</span> gettime() {
    $.ajax({
        url<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;/time&#34;</span>,
        timeout<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">10000</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (data) {
            $(<span style="color:#0c6">&#34;#time&#34;</span>).html(data)
        }, error<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (xhr, type, errorThrown) {

        }
    })
}

<span style="color:#2c5dcd;font-weight:bold">function</span> getc1data() {
    $.ajax({
        url<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;/c1&#34;</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (data) {
            $(<span style="color:#0c6">&#34;.num h1&#34;</span>).eq(<span style="color:#5918bb;font-weight:bold">0</span>).text(data.confirm);
            $(<span style="color:#0c6">&#34;.num h1&#34;</span>).eq(<span style="color:#5918bb;font-weight:bold">1</span>).text(data.suspect);
            $(<span style="color:#0c6">&#34;.num h1&#34;</span>).eq(<span style="color:#5918bb;font-weight:bold">2</span>).text(data.heal);
            $(<span style="color:#0c6">&#34;.num h1&#34;</span>).eq(<span style="color:#5918bb;font-weight:bold">3</span>).text(data.dead);
        }, error<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (xhr, type, errorThrown) {

        }
    })
}

<span style="color:#2c5dcd;font-weight:bold">function</span> getc2data() {
    $.ajax({
        url<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;/c2&#34;</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (data) {
            optionMap.series[<span style="color:#5918bb;font-weight:bold">0</span>].data <span style="color:#2c5dcd">=</span> data.data
            ec_center.setOption(optionMap)
        }, error<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (xhr, type, errorThrown) {

        }
    })
}

<span style="color:#2c5dcd;font-weight:bold">function</span> getl1data() {
    $.ajax({
        url<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;/l1&#34;</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (data) {
            ec_left1_Option.xAxis[<span style="color:#5918bb;font-weight:bold">0</span>].data <span style="color:#2c5dcd">=</span> data.day
            ec_left1_Option.series[<span style="color:#5918bb;font-weight:bold">0</span>].data <span style="color:#2c5dcd">=</span> data.confirm
            ec_left1_Option.series[<span style="color:#5918bb;font-weight:bold">1</span>].data <span style="color:#2c5dcd">=</span> data.suspect
            ec_left1_Option.series[<span style="color:#5918bb;font-weight:bold">2</span>].data <span style="color:#2c5dcd">=</span> data.heal
            ec_left1_Option.series[<span style="color:#5918bb;font-weight:bold">3</span>].data <span style="color:#2c5dcd">=</span> data.dead
            ec_left1.setOption(ec_left1_Option)
        }, error<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (xhr, type, errorThrown) {

        }
    })
}

<span style="color:#2c5dcd;font-weight:bold">function</span> getl2data() {
    $.ajax({
        url<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;/l2&#34;</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (data) {
            ec_left2_Option.xAxis[<span style="color:#5918bb;font-weight:bold">0</span>].data <span style="color:#2c5dcd">=</span> data.day
            ec_left2_Option.series[<span style="color:#5918bb;font-weight:bold">0</span>].data <span style="color:#2c5dcd">=</span> data.confirm_add
            ec_left2_Option.series[<span style="color:#5918bb;font-weight:bold">1</span>].data <span style="color:#2c5dcd">=</span> data.suspect_add
            ec_left2.setOption(ec_left2_Option)
        }, error<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span> (xhr, type, errorThrown) {

        }
    })
}

<span style="color:#2c5dcd;font-weight:bold">function</span> get_r1_data(){
    $.ajax({
        url<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#34;/r1&#34;</span>,
        success<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span>(data) {
            ec_right1_Option.xAxis.data<span style="color:#2c5dcd">=</span>data.city;
            ec_right1_Option.series[<span style="color:#5918bb;font-weight:bold">0</span>].data<span style="color:#2c5dcd">=</span>data.confirm;
            ec_right1.setOption(ec_right1_Option);
        }
    })
}

getc1data()
getl1data()
getl2data()
getc2data()
get_r1_data()
setInterval(gettime, <span style="color:#5918bb;font-weight:bold">1000</span>)
setInterval(getc1data, <span style="color:#5918bb;font-weight:bold">1000</span><span style="color:#2c5dcd">*</span><span style="color:#5918bb;font-weight:bold">10</span>)
setInterval(getc2data, <span style="color:#5918bb;font-weight:bold">10000</span><span style="color:#2c5dcd">*</span><span style="color:#5918bb;font-weight:bold">10</span>)
setInterval(getl1data, <span style="color:#5918bb;font-weight:bold">10000</span><span style="color:#2c5dcd">*</span><span style="color:#5918bb;font-weight:bold">10</span>)
setInterval(getl2data, <span style="color:#5918bb;font-weight:bold">10000</span><span style="color:#2c5dcd">*</span><span style="color:#5918bb;font-weight:bold">10</span>)
setInterval(get_r1_data, <span style="color:#5918bb;font-weight:bold">10000</span><span style="color:#2c5dcd">*</span><span style="color:#5918bb;font-weight:bold">10</span>)
</code></pre></td></tr></table>
</div>
</div><h2 id="echarts语法简明">Echarts语法简明<a hidden class="anchor" aria-hidden="true" href="#echarts语法简明">#</a></h2>
<ol>
<li>初始化echarts实例</li>
</ol>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">//初始化echarts实例
var ec_center = echarts.init(document.getElementById(&#34;c2&#34;),&#34;dark&#34;);
</code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>
<p>找到你想要的数据可视化模板代码，或者自己编写</p>
</li>
<li>
<p>使用制定的配置项和数据显示图表</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">//使用制定的配置项和数据显示图表
ec_center.setOption(optionMap);
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>例如：</p>
<p>ec_center.js</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#0080ff;font-style:italic">//初始化echarts实例
</span><span style="color:#0080ff;font-style:italic"></span><span style="color:#2c5dcd;font-weight:bold">var</span> ec_center <span style="color:#2c5dcd">=</span> echarts.init(<span style="color:#5918bb;font-weight:bold">document</span>.getElementById(<span style="color:#0c6">&#34;c2&#34;</span>),<span style="color:#0c6">&#34;dark&#34;</span>);
<span style="color:#2c5dcd;font-weight:bold">var</span> mydata <span style="color:#2c5dcd">=</span> []
<span style="color:#2c5dcd;font-weight:bold">var</span> optionMap <span style="color:#2c5dcd">=</span> {
      title<span style="color:#2c5dcd">:</span> {
         text<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;&#39;</span>,
         subtext<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;&#39;</span>,
         x<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;left&#39;</span>
      },
      tooltip<span style="color:#2c5dcd">:</span> {
         trigger<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;item&#39;</span>
      },
      <span style="color:#0080ff;font-style:italic">//左侧小导航图标
</span><span style="color:#0080ff;font-style:italic"></span>      visualMap<span style="color:#2c5dcd">:</span> {
         show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
         x<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;left&#39;</span>,
         y<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;bottom&#39;</span>,
         textStyle<span style="color:#2c5dcd">:</span> {
            fontSize<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">8</span>
         },
         splitList<span style="color:#2c5dcd">:</span> [{
               start<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">1</span>,
               end<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">9</span>
            },
            {
               start<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">10</span>,
               end<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">99</span>
            },
            {
               start<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">100</span>,
               end<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">999</span>
            },
            {
               start<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">1000</span>,
               end<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">9999</span>
            },
            {
               start<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">10000</span>
            }
         ],
         color<span style="color:#2c5dcd">:</span> [<span style="color:#0c6">&#39;#8A3310&#39;</span>,<span style="color:#0c6">&#39;#C64918&#39;</span>, <span style="color:#0c6">&#39;#E55B25&#39;</span>,<span style="color:#0c6">&#39;#F2AD92&#39;</span>, <span style="color:#0c6">&#39;#F9DCD1&#39;</span>]
      },

         <span style="color:#0080ff;font-style:italic">//配置属性
</span><span style="color:#0080ff;font-style:italic"></span>         series<span style="color:#2c5dcd">:</span> [{
            name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;累积确诊人数&#39;</span>,
            type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;map&#39;</span>,
            mapType<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;china&#39;</span>,
            roam<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">false</span>,
            itemStyle<span style="color:#2c5dcd">:</span> {
               normal<span style="color:#2c5dcd">:</span> {
                  borderWidth<span style="color:#2c5dcd">:</span> .<span style="color:#5918bb;font-weight:bold">5</span>,
                  borderColor<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#009fe8&#39;</span>,
                  areaColor<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#ffefd5&#39;</span>
               },
               emphasis<span style="color:#2c5dcd">:</span> {
                  borderWidth<span style="color:#2c5dcd">:</span> .<span style="color:#5918bb;font-weight:bold">5</span>,
                  borderColor<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#4b0082&#39;</span>,
                  areaColor<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#fff&#39;</span>
               }
            },
            label<span style="color:#2c5dcd">:</span> {
               normal<span style="color:#2c5dcd">:</span> {
                  show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>, <span style="color:#0080ff;font-style:italic">//省份名称
</span><span style="color:#0080ff;font-style:italic"></span>                  fontSize<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">8</span>
               },
               emphasis<span style="color:#2c5dcd">:</span> {
                  show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
                  fontSize<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">8</span>
               }
            },
            data<span style="color:#2c5dcd">:</span> mydata <span style="color:#0080ff;font-style:italic">//数据
</span><span style="color:#0080ff;font-style:italic"></span>         }]
      };

      <span style="color:#0080ff;font-style:italic">//使用制定的配置项和数据显示图表
</span><span style="color:#0080ff;font-style:italic"></span>      ec_center.setOption(optionMap);
</code></pre></td></tr></table>
</div>
</div><p>ec_left1.js</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#2c5dcd;font-weight:bold">var</span> ec_left1 <span style="color:#2c5dcd">=</span> echarts.init(<span style="color:#5918bb;font-weight:bold">document</span>.getElementById(<span style="color:#0c6">&#39;l1&#39;</span>), <span style="color:#0c6">&#34;dark&#34;</span>);
<span style="color:#2c5dcd;font-weight:bold">var</span> ec_left1_Option <span style="color:#2c5dcd">=</span> {
    title<span style="color:#2c5dcd">:</span> {
        text<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;全国累计趋势&#34;</span>,
        textStyle<span style="color:#2c5dcd">:</span> {
            <span style="color:#0080ff;font-style:italic">//color:&#39;white&#39;,
</span><span style="color:#0080ff;font-style:italic"></span>        },
        left<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;left&#39;</span>,
    },
    tooltip<span style="color:#2c5dcd">:</span> {
        trigger<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;axis&#39;</span>,
        axisPointer<span style="color:#2c5dcd">:</span> {
            type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
            lineStyle<span style="color:#2c5dcd">:</span> {
                color<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#7171C6&#39;</span>
            }
        },
    },
    legend<span style="color:#2c5dcd">:</span> {
        data<span style="color:#2c5dcd">:</span> [<span style="color:#0c6">&#34;累计确诊&#34;</span>, <span style="color:#0c6">&#34;现有疑似&#34;</span>, <span style="color:#0c6">&#34;累积治愈&#34;</span>, <span style="color:#0c6">&#34;累计死亡&#34;</span>],
        left<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;right&#34;</span>
    },
    <span style="color:#0080ff;font-style:italic">//图形位置
</span><span style="color:#0080ff;font-style:italic"></span>    grid<span style="color:#2c5dcd">:</span> {
        left<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;4%&#39;</span>,
        right<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;6%&#39;</span>,
        bottom<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;4%&#39;</span>,
        top<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">50</span>,
        containLabel<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>
    },
    xAxis<span style="color:#2c5dcd">:</span> [{
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;category&#39;</span>,
        data<span style="color:#2c5dcd">:</span> []
        <span style="color:#0080ff;font-style:italic">// &#39;01.24&#39;, &#39;01.25&#39;, &#39;01.26&#39;
</span><span style="color:#0080ff;font-style:italic"></span>    }],
    yAxis<span style="color:#2c5dcd">:</span> [{
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;value&#39;</span>,
        axisLabel<span style="color:#2c5dcd">:</span> {
            show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
            color<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;white&#39;</span>,
            fontSize<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">12</span>,
            formatter<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span>(value) {
                <span style="color:#2c5dcd;font-weight:bold">if</span> (value <span style="color:#2c5dcd">&gt;=</span> <span style="color:#5918bb;font-weight:bold">1000</span>) {
                    value <span style="color:#2c5dcd">=</span> value <span style="color:#2c5dcd">/</span> <span style="color:#5918bb;font-weight:bold">1000</span> <span style="color:#2c5dcd">+</span> <span style="color:#0c6">&#39;k&#39;</span>;
                }
                <span style="color:#2c5dcd;font-weight:bold">return</span> value;
            }
        },
        <span style="color:#0080ff;font-style:italic">//y轴线设置显示
</span><span style="color:#0080ff;font-style:italic"></span>        axisLine<span style="color:#2c5dcd">:</span> {
            show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>
        },
        <span style="color:#0080ff;font-style:italic">//与x轴平行的线样式
</span><span style="color:#0080ff;font-style:italic"></span>        splitLine<span style="color:#2c5dcd">:</span> {
            show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
            lineStyle<span style="color:#2c5dcd">:</span> {
                color<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#17273B&#39;</span>,
                width<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">1</span>,
                type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;solid&#39;</span>,
            }
        }
    }],
    series<span style="color:#2c5dcd">:</span> [{
        name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;累计确诊&#34;</span>,
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
        smooth<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
        data<span style="color:#2c5dcd">:</span> []
    <span style="color:#0080ff;font-style:italic">//    260, 406, 529
</span><span style="color:#0080ff;font-style:italic"></span>    }, {
        name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;现有疑似&#34;</span>,
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
        smooth<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
        data<span style="color:#2c5dcd">:</span> []},
        {
        name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;累积治愈&#34;</span>,
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
        smooth<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
        data<span style="color:#2c5dcd">:</span> []
    },{
        name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;累计死亡&#34;</span>,
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
        smooth<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
        data<span style="color:#2c5dcd">:</span> []
    }]
};
ec_left1.setOption(ec_left1_Option)
</code></pre></td></tr></table>
</div>
</div><p>ec_left2.js</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#2c5dcd;font-weight:bold">var</span> ec_left2 <span style="color:#2c5dcd">=</span> echarts.init(<span style="color:#5918bb;font-weight:bold">document</span>.getElementById(<span style="color:#0c6">&#39;l2&#39;</span>), <span style="color:#0c6">&#34;dark&#34;</span>);
<span style="color:#2c5dcd;font-weight:bold">var</span> ec_left2_Option <span style="color:#2c5dcd">=</span> {
    tooltip<span style="color:#2c5dcd">:</span> {
        trigger<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;axis&#39;</span>,
        <span style="color:#0080ff;font-style:italic">//指示器
</span><span style="color:#0080ff;font-style:italic"></span>        axisPointer<span style="color:#2c5dcd">:</span> {
            type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
            lineStyle<span style="color:#2c5dcd">:</span> {
                color<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#7171C6&#39;</span>
            }
        },
    },
    legend<span style="color:#2c5dcd">:</span> {
        data<span style="color:#2c5dcd">:</span> [<span style="color:#0c6">&#39;新增确诊&#39;</span>, <span style="color:#0c6">&#39;新增疑似&#39;</span>],
        left<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;right&#34;</span>
    },
    <span style="color:#0080ff;font-style:italic">//标题样式
</span><span style="color:#0080ff;font-style:italic"></span>    title<span style="color:#2c5dcd">:</span> {
        text<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;全国新增趋势&#34;</span>,
        textStyle<span style="color:#2c5dcd">:</span> {
             color<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;yellow&#39;</span>,
            fontSize<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">16</span>
        },
        left<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;left&#39;</span>
    },
    <span style="color:#0080ff;font-style:italic">//图形位置
</span><span style="color:#0080ff;font-style:italic"></span>    grid<span style="color:#2c5dcd">:</span> {
        left<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;4%&#39;</span>,
        right<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;6%&#39;</span>,
        bottom<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;4%&#39;</span>,
        top<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">50</span>,
        containLabel<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>
    },
    xAxis<span style="color:#2c5dcd">:</span> [{
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;category&#39;</span>,
        <span style="color:#0080ff;font-style:italic">//x轴坐标点开始与结束点位置都不在最边缘
</span><span style="color:#0080ff;font-style:italic"></span>        <span style="color:#0080ff;font-style:italic">// boundaryGap : true,
</span><span style="color:#0080ff;font-style:italic"></span>        data<span style="color:#2c5dcd">:</span> []
    }],
    yAxis<span style="color:#2c5dcd">:</span> [{
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;value&#39;</span>,
        <span style="color:#0080ff;font-style:italic">//y轴字体设置
</span><span style="color:#0080ff;font-style:italic"></span>
        <span style="color:#0080ff;font-style:italic">//y轴线设置显示
</span><span style="color:#0080ff;font-style:italic"></span>        axisLine<span style="color:#2c5dcd">:</span> {
            show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>
        },
        axisLabel<span style="color:#2c5dcd">:</span> {
            show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
            color<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;white&#39;</span>,
            fontSize<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">12</span>,
            formatter<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">function</span>(value) {
                <span style="color:#2c5dcd;font-weight:bold">if</span> (value <span style="color:#2c5dcd">&gt;=</span> <span style="color:#5918bb;font-weight:bold">1000</span>) {
                    value <span style="color:#2c5dcd">=</span> value <span style="color:#2c5dcd">/</span> <span style="color:#5918bb;font-weight:bold">1000</span> <span style="color:#2c5dcd">+</span> <span style="color:#0c6">&#39;k&#39;</span>;
                }
                <span style="color:#2c5dcd;font-weight:bold">return</span> value;
            }
        },
        <span style="color:#0080ff;font-style:italic">//与x轴平行的线样式
</span><span style="color:#0080ff;font-style:italic"></span>        splitLine<span style="color:#2c5dcd">:</span> {
            show<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
            lineStyle<span style="color:#2c5dcd">:</span> {
                color<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;#17273B&#39;</span>,
                width<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">1</span>,
                type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;solid&#39;</span>,
            }
        }
    }],
    series<span style="color:#2c5dcd">:</span> [{
        name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;新增确诊&#34;</span>,
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
        smooth<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
        data<span style="color:#2c5dcd">:</span> []
    }, {
        name<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#34;新增疑似&#34;</span>,
        type<span style="color:#2c5dcd">:</span> <span style="color:#0c6">&#39;line&#39;</span>,
        smooth<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd;font-weight:bold">true</span>,
        data<span style="color:#2c5dcd">:</span> []
    }]
};

ec_left2.setOption(ec_left2_Option)
</code></pre></td></tr></table>
</div>
</div><p>ec_right1.js</p>
<div class="highlight"><div style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#2c5dcd;font-weight:bold">var</span> ec_right1<span style="color:#2c5dcd">=</span>echarts.init(<span style="color:#5918bb;font-weight:bold">document</span>.getElementById(<span style="color:#0c6">&#39;r1&#39;</span>),<span style="color:#0c6">&#34;dark&#34;</span>);
<span style="color:#2c5dcd;font-weight:bold">var</span> ec_right1_Option<span style="color:#2c5dcd">=</span>{
    title<span style="color:#2c5dcd">:</span>{
        text<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#34;非湖北地区城市确诊TOP5&#34;</span>,
        textStyle<span style="color:#2c5dcd">:</span>{
            color<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;white&#39;</span>,
        },
        left<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;left&#39;</span>,
    },
      color<span style="color:#2c5dcd">:</span>[<span style="color:#0c6">&#39;#3398DB&#39;</span>],
        tooltip<span style="color:#2c5dcd">:</span>{
            trigger<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;axis&#39;</span>,
            axisPointer<span style="color:#2c5dcd">:</span>{
                type<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;shadow&#39;</span>,
            }
        },
    xAxis<span style="color:#2c5dcd">:</span>{
        type<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;category&#39;</span>,
        data<span style="color:#2c5dcd">:</span>[]
    },
    yAxis<span style="color:#2c5dcd">:</span>{
        type<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;value&#39;</span>,
    },
    series<span style="color:#2c5dcd">:</span>[{
        data<span style="color:#2c5dcd">:</span>[],
        type<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#39;bar&#39;</span>,
        barMaxWidth<span style="color:#2c5dcd">:</span><span style="color:#0c6">&#34;50%&#34;</span>
    }]
};
ec_right1.setOption(ec_right1_Option)
</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://hanson00.github.io/tags/flask/">Flask</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://hanson00.github.io/posts/technology/python/python-json/">
    <span class="title">« Prev</span>
    <br>
    <span>Python Json</span>
  </a>
  <a class="next" href="https://hanson00.github.io/posts/technology/python/python%E7%BC%96%E7%A0%81%E6%B5%85%E8%B0%88/">
    <span class="title">Next »</span>
    <br>
    <span>Python编码浅谈</span>
  </a>
</nav>

  </footer>
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">💬评论</span>✨昵称输入QQ号可以自动关联✨
        <hr />

    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.staticfile.org/twikoo/1.5.11/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo1-mu.vercel.app/",  
            el: "#tcomment",
            lang: 'zh-CN',
            region: 'ap-guangzhou',  
            path: window.TWIKOO_MAGIC_PATH || window.location.pathname,
        });
    </script>
</div>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://hanson00.github.io/">Hanson&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
